# 🥕 직렬화 & 역직렬화
- 직렬화(serialize)란 자바 언어에서 사용되는 Object 또는 Data를 다른 컴퓨터의 자바 시스템에도 사용 할 수 있도록 바이트 스트림(stream of bytes) 형태로 연속적인(serial) 데이터로 변환하는 포맷 변환 기술
- 역직렬화(Deserialize)는 바이트로 변환된 데이터를 원래대로 자바 시스템의 Object 또는 Data로 변환하는 기술
- JVM의 힙(heap) 혹은 스택(stack) 메모리에 상주하고 있는 객체 데이터를 직렬화를 통해 바이트 형태로 변환하여 데이터베이스나 파일과 같은 외부 저장소에 저장해두고, 다른 컴퓨터에서 이 파일을 가져와 역직렬화를 통해 자바 객체로 변환해서 JVM 메모리에 적재한다.


```
[바이트 스트림]
스트림은 클라이언트나 서버 간에 출발지 목적지로 입출력하기 위한 데이터가 흐르는 통로를 말한다.
자바의 스트림의 기본 단위는 바이트로 두고 있어 전송을 위해 최소 단위인 바이트 스트림으로 변환하여 처리한다.
```
![image](https://github.com/user-attachments/assets/57f6e3ad-bab7-42c4-89eb-03b552faac17)

## 직렬화 사용처
- 직렬화를 응용한다면 휘발성이 있는 캐싱 데이터를 영구 저장이 필요할 때 사용할 수도 있다.
- 예를들어 JVM의 메모리에만 상주되어있는 객체 데이터가 시스템이 종료되더라도 나중에 다시 재사용이 될 수 있을 때 영속화(Persistance)를 해두면 좋다.
- 이러한 특성을 살린 자바 직렬화는 실제로도 여러곳에 응용된다.

### 서블릿 세션(Sevlet Session)
- 단순히 세션을 서블릿 메모리 위에서 운용한다면 직렬화를 필요로 하지 않지만, 만일 세션 데이터를 저장 & 공유가 필요할때 직렬화를 이용한다.
- 세션 데이터를 데이터베이스에 저장할 때
- 톰캣의 세션 클러스터링을 통해 각 서버간에 데이터 공유가 필요할 때
- 최근은 Redis와 같은 캐시 DB를 많이 사용한다.

### 캐시
- 데이터베스로부터 조회한 객체 데이터를 다른 모듈에서도 필요할 때 재차 DB를 조회하는 것이 아닌, 객체를 직렬화하여 메모리나 외부 파일에 저장해 두었다가 역질렬화하여 사용하는 캐시 데이터로서 이용이 가능하다.
- 물론 자바 직렬화를 이용해서만 캐시를 저장할 수 있는 것은 아니지만 자바 시스템에서 만큼은 구현이 가장 간편하기 때문에 많이 사용된다고 보면 된다.

### 자바 RMI (Remote Method Invocation)
- 자바 RMI는 원격 시스템 간의 메시지 교환을 위해서 사용하는 자바에서 지원하는 기술이다.
- 이 메세지에 객체 데이터를 직렬화하여 송신하는 것이다.
- 최근에는 소켓을 이용하기 때문에 안쓰이는 기술이다.


## 직렬화 VS Json 비교
- 자바 직렬화는 외부 파일이나 네트워크를 통해 클라이언트 간에 객체 데이터를 주고 받을 때 사용된다.
- JSON은 웹(Web) 뿐만 아니라 게임 쪽에서도 설정 파일을 쓰이거나 데이터를 교환할 때 범용적으로 사용된다.
- 직렬화를 오로지 자바 프로그램에서만 사용이 가능하다.
![image](https://github.com/user-attachments/assets/df0e7cde-f291-48b3-887d-00e311b5b5c2)

