# 🥕트랜잭션(ACID)
- 단일한 논리적인 작업 단위
- 논리적인 이유로 여러 SQL문들을 단일 작업으로 묶어서 나눠질 수 없게 만든 것이 transaction이다.
- transaction의 SQL문들 중 일부만 실패해도 DB에 반영되는 일은 일어나지 않는다.
```
START TRANSACTION // AutoCommit이 자동 비활성화 된다.
    -- 이 블록안의 명령어들은 마치 하나의 명령어 처럼 처리됨
    -- 성공하던지, 다 실패하던지 둘중 하나가 됨.
    A의 계좌로부터 인출;
    B의 계좌로 입금;
COMMIT // 지금까지 작업한 내용을 DB에 영구적으로 저장 // transaction 종료
// ROLLBACK // 지금까지 작업들을 모두 취소하고 transaction 이전 상태로 되돌린다.// 종료
```

## 트랜잭션 ACID란?
- 트랜잭션이 어떤 속성을 지녀야 하는지 나타내는 핵심
- 트랜잭션은 ACID라 규칙을 모두 보장해 데이터베이스 트랜잭션이 안전하게 수행되어야 한다.
- 원자성(Atomicity), 일관성(Consistency), 격리성(Isolation), 지속성(Durability)의 앞글자를 딴 규칙

![image](https://github.com/sengmin14/CS-Study/assets/140876841/ac4396b4-bee4-4aa1-8162-b0876d250daf)

### 원자성(Atomicity)
- All or Nothing
- 트랜잭션은 모두 실행 하거나 모두 실행하지 않음 의 두 가지 상태만 있어야 한다.
- 트랜잭션은 논리적으로 쪼개질 수 없는 작업 단위이기에 하나의 SQL문이라도 실패하면, 롤백해야 한다.
<br>

### 일관성(Consistency)
- 데이터베이스의 상태가 일관되어야 한다는 성질이다.
- 하나의 트랜잭션 이전과 이후, 데이터베이스의 상태는 이전과 같이 유효해야 한다.
- 트랜잭션이 일어난 이후의 데이터베이스는 데이터베이스의 제약이나 규칙을 만족해야 한다.
<br>

### 고립성(Isolation)
- 여러 트랜잭션이 동시에 실행될 때에도, 혼자 실행되는 것처럼 동작하게 만들어야 한다.
- 즉, 동시에 실행되는 여러 트랜잭션은 서로 영향을 주지 않고 독립적으로 실행되는 것처럼 보여야 한다.
- DBMS는 여러 종류의 isolation level을 제공하고, 개발자는 이중에서 어떤 레벨로 트랜잭션을 동작시킬지 설정할 수 있다.
<br>

### 영속성(Durability)
- 커밋된 트랜잭션의 결과는 데이터베이스에 영구적으로 저장되어야 한다.
- 영구적 저장 == 비휘발성 메모리(SSD, HDD)에 저장
- DB system에 전원이 꺼진다던가 파손되는 등 문제가 생겨도 커밋된 결과는 계속 데이터베이스에 남아있어야 한다.

