# 🥕 DB 스토리지 엔진
- 물리적인 데이터를 가져오는 장치를 말한다.
- 데이터베이스 관리 시스템(DBMS)이 데이터베이스에 대해 데이터를 삽입, 추출, 업데이트 및 삭제하는데 사용하는 소프트웨어 컴포넌트
- Mysql에서 테이블을 생성하면 실제로 서버상에는 frm이라는 파일을 생성한다. 이 파일에 접근하는 속성을 설정하는 것이 스토리지 엔진

![image](https://github.com/user-attachments/assets/73c9817a-06bc-4d41-bcbb-ddeb15f8aa4d)

## 스토리지 엔진의 역할
```
스토리지 엔진은 다음과 같은 역할을 하는 컴포넌트로 구성된다.
```

### 트랜잭션
- 트랜잭션을 스케줄링하고 데이터베이스 상태의 논리적 일관성 보장

### 잠금 매니저
- 트랜잭션에서 접근하는 데이터베이스 객체에 대한 잠금을 제어.
- 동시 수행 작업이 물리적 데이터 무결성을 침해하지 않도록 함.
- 트랜잭션과 잠금 매니저는 동시성 제어. 논리적 물리적 데이터 무결성을 보장하고, 동시 수행 작업의 효율적 수행을 담당.

### 엑세스 메서드
- 디스크에 저장된 데이터에 대한 접근 및 저장 방식을 정의.
- 힙 파일/B-트리/LSM트리 등의 자료구조 사용

### 버퍼 매니저
- 데이터 페이지를 메모리에 캐시

### 복구 매니저
- 로그를 유지 관리하고 장애 발생 시 시스템 복구

<br>

## 스토리지 엔진의 종류
### 1. MyISAM
```
정적인 데이터를 저장하고 자주 읽기 작업이 일어나는 테이블에 적합
```

- MySQL의 기본 스토리지 엔진
- 구조가 단순해, 속도가 빠르다.
- 데이터 저장에 실제적인 제한이 없고 매우 효율적으로 저장한다.
  - 메모리 효율이 InnoDB보다 좋음
- 데이블 작업시 특정 행을 수정하려고 하면 테이블 전체에 락이 걸려서 다른사람이 작업 할 수 없다.(Table-level Lock)
  - 갱신이 많은 용도로는 성능적으로 불리. 동시 서비스에 적합X
  - multi-thread 환경에서는 성능이 저하될 수 있다.
- 트랜잭션에 대한 자원이 없기 때문에 작업도중 문제가 생겨도 이미 DB안으로 데이터가 들어감
  - DB프로세스가 비정상 종료되면 테이블이 파손될 가능성이 높다. -> 데이터 무결성이 보장되지 않는다.
- Full-text 검색이 가능하다.
- 주로 select 작업이 많은 경우에 사용된다. 즉, 읽기(READ)작업에 효과적인다.


### 2. InnoDB
```
데이터 입력 및 수정이 빈번한 높은 퍼포먼스를 요구하고 다중 사용자, 동시성이 높은 OLTP애플리케이션에 적합
(OLTP는 여러 사용자가 실시간으로 DB Data를 갱신, 조회하는 단위 작업 처리하는 방식이다.)
```

- MariaDB의 기본 스토리지 엔진
- MyISAM보다 데이터 저장비율이 낮고, 데이터 로드 속도가 느리다.
- 레코드 기반의 락(Lock)을 제공한다. 즉, 테이블 레벨이 아닌 ROW 레벨의 락을 지원한다.
  - 이로 인해 높은 동시성 처리가 가능한 특징이 있고 안정적이다. (Row - level Lock)
  - Insert, Update, Delete에 대한 속도가 빠르다.
- 외부키를 지원한다.
- 자동 데드락 감지 : 감지 시 변경된 레코드가 가장 작은 트랜잭션을 롤백해버려서 데드락을 풀어준다.
- 자동 장애 복구 : 완료하지 못한 트랜잭션이나 일부만 기록되어 손상된 데이터 페이지 등을 자동 복구한다.
- 데이터 무경성 보장(트랜잭션, 외래키, 제약조건, 동시성 등) - ACID
